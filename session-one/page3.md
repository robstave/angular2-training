

# Application

So there are several files and directories all over the place. Some are configuration, some for webpack, but the one we want to look at
is the /app directory.


![DIR](https://github.com/robstave/angular2-training/blob/master/session-one/dir.png "Dir")

## App Modules
Angular code is boxed into modules.  The modules contain services, components, templates.  Every app has at least one module.
Other modules containing features can be added as needed.

When we created the app with angular-cli, it created a root app.  The file that defines this is _app.module.ts_

```typescript
//app.module.ts
import { BrowserModule } from '@angular/platform-browser';
import { NgModule } from '@angular/core';
import { FormsModule } from '@angular/forms';
import { HttpModule } from '@angular/http';

import { AppComponent } from './app.component';

@NgModule({
  declarations: [
    AppComponent
  ],
  imports: [
    BrowserModule,
    FormsModule,
    HttpModule
  ],
  providers: [],
  bootstrap: [AppComponent]
})
export class AppModule { }
```

* The imports are there to point to modules we need to include in our module.
* the @NgModule decoration contains the configurations for this module like import references, providers (for services) and the bootstrapping.
* the export makes things visible for other modules. 

This is a root project, so there is no real need for the export, the angular cli makes it. If your curious however, peek in
the source code for something like [the HTTP module in Angular](https://github.com/angular/angular/blob/master/modules/%40angular/http/src/http.ts)


## App component



Another file you see is  _app.component.ts_.

```typescript
import { Component } from '@angular/core';

@Component({
  selector: 'app-root',
  templateUrl: './app.component.html',
  styleUrls: ['./app.component.css']
})
export class AppComponent {
  title = 'app works!';
}
```
 
All this was generated by the CLI.  It knows what to import and does the skeleton code for the application, css, html and testcases.

The component is where most of the work is done.  It points to a template, css, defines how the selector is made and is
the model all roled up in one.

If you are familiar with Angular1.x, the exported class _AppComponent_ is basically what was the controller in angular1.x.  
In Angular 1.5, they started the component concept and moved away from 
adding values to the $scope and instead use the properties in the javascript object itself.  Its more of a
transition to Angular2.

With Angular2, they are all components.  Componets are added to html templates with the appropriate selector.

In this case:

```html
<app-root></app-root> 
```
The component controls a part of the screen called the view. It interacts with this view through the properties
of the @component class.  For example, the component either contains or points to a _template_ string.

The template is the html code that will be rendered in the view.  It is somewhat special though as
the template will be processed a bit and modified.

The templateURL and and styleUrls point to files that have the template and css code. This could be used to specify inline code as well.

That was a pretty quick overview.  For a few more details, check out the [Angular Docs - architecture page](https://angular.io/docs/ts/latest/guide/architecture.html)




## Adding properties to the component

Lets add to this. We will add two more properties to the AppComponent. This is similar to adding to the scope in angular.


```typescript
import { Component } from '@angular/core';

@Component({
  selector: 'app-root',
  templateUrl: './app.component.html',
  styleUrls: ['./app.component.css']
})
export class AppComponent {
  title = 'app works!';
  title2 = 'Go Angular'; //added
  title3 = 'Its your birthday'; //added
}
```

Once you save...check out the shell. Its compiling on the fly.

The templateUrl points to the html template that belongs to this component.  It can be written inline or reference another file.

The styleUrls are a list of css files.  It can also be be just _styles_ and be a list of css strings.  Or you can have both  :)

If you check out _app.component.html_ we see:

```html
<h1>
  {{title}}
</h1>
```

The part with the  {{ }}  is what is called a template tag. Angular2 will use interpolation to evaluate the contents of
the curly brackets. It will replace that name with the string value of the component property in the component.

You can evaluate all kinds of things here, but for now..lets just stick to the property references.

Further Reading:

  
  * [Template Syntax](https://angular.io/docs/ts/latest/guide/template-syntax.html)
  * [Quick intro to template syntax](https://medium.com/front-end-hacking/angular-2-a-quick-intro-about-template-syntax-121f9b160a64#.ai8sqmfub)
  

Lets modify our template to say a bit more.
What we are doing here is adding more properties to be evaluated in the template for the view.

```html
<h1>
  {{title}} - {{title2}} - {{title3}}
</h1>
```

Our ng server should see the changes, recompile and our browser will refresh.

```
 app works! - Go Angular -Its your birthday
```

## Component CSS files

We can tweak the app.component.css file to add some css classes

```css
.color1 {
    color: blue;
}

.color2 {
    color: red;
}

 .color3 {
    color: green;
}
```

Now modify the _app.component.html_ as follows

```html
<h1>
  <span class="color1">{{title}}</span> - <span class="color2">{{title2}}</span> - <span class="color3">{{title3}}</span>
</h1>
```

And you should see something a bit more colorful.

[Here](https://blog.thoughtram.io/angular/2015/06/25/styling-angular-2-components.html) is a pretty good blog post that describes styling components in a little more detail.



# Adding another component

Lets add some components here.
Components can be added and embedded into the views of other components.  This is done by adding the selector of one component into the 
template of another.

Lets create four components to just demonstrate a simple organization of components.

```html
<app-usa></app-usa>
<app-texas></app-texas>
<app-dallas></app-dallas>
<app-pennsylvania></app-pennsylvania>
```

We would like the components to be nested into each other like so.

![Modules](https://github.com/robstave/angular2-training/blob/master/session-one/modules.png "Modules")


Take advantage of name spacing as much as you can. In this case, angular-ci is prepending _app-_ in front of the components. 

This is the default prefix.

When angular-bootstrap was first introduced, their directives had matching names with standard items as well ("popup", "dropdown" and such).
At some point this cause a mess of collisions and they renamed it all to uib-popup, uib-dropdown and so on.
So to avoid this, you do want a unique prefix as well.  Luckily, this is an option in the angular cli command. (see --prefix)

If your curious, take a peek in angular-cli.json. You will see the prefix entry there.


So start out creating the usa component

```bash
$ ng generate component usa
installing component
  create src\app\usa\usa.component.css
  create src\app\usa\usa.component.html
  create src\app\usa\usa.component.spec.ts
  create src\app\usa\usa.component.ts
  update src\app\app.module.ts
```

Edit the following. 
edit the _usa.component.css_ to add a border

```css
p {
    border-style: solid;
    border-color: green;
}
```

in _usa.component.html_

```html
<p>
  This is the USA component
</p>
```


Now finally, reedit the _app.component.html_

```html
<h1>
    <span class="color1">{{title}}</span> - <span class="color2">{{title2}}</span> - <span class="color3">{{title3}}</span>

	<div>
	 <app-usa></app-usa>
	</div>
</h1>
```

![Application](https://github.com/robstave/angular2-training/blob/master/session-one/app1.PNG "App Snap 1")


The app-usa component is in the app-root and thte cox is created using the css in the file specified in the styleUrls list.



# Add other components.

Create the other components

```bash
$ ng generate component usa/texas
installing component
  create src\app\usa\texas\texas.component.css
  create src\app\usa\texas\texas.component.html
  create src\app\usa\texas\texas.component.spec.ts
  create src\app\usa\texas\texas.component.ts
  update src\app\app.module.ts

Stave@St-PC MINGW64 ~/interlegis/ang2/nghello/my-project (master)
$ ng generate component usa/texas/dallas
installing component
  create src\app\usa\texas\dallas\dallas.component.css
  create src\app\usa\texas\dallas\dallas.component.html
  create src\app\usa\texas\dallas\dallas.component.spec.ts
  create src\app\usa\texas\dallas\dallas.component.ts
  update src\app\app.module.ts

Stave@St-PC MINGW64 ~/interlegis/ang2/nghello/my-project (master)
$ ng generate component usa/pennsylvania
installing component
  create src\app\usa\pennsylvania\pennsylvania.component.css
  create src\app\usa\pennsylvania\pennsylvania.component.html
  create src\app\usa\pennsylvania\pennsylvania.component.spec.ts
  create src\app\usa\pennsylvania\pennsylvania.component.ts
  update src\app\app.module.ts
```

## An exercise

We will edit the css and and html so that.

   * Usa is the top component
   * Usa contains Texas and Pennsylvania
   * Texas has a red border, penn has the blue.
   * Dallas is purple and within Texas
   
Your results should look like this

![application](https://raw.githubusercontent.com/robstave/angular2-training/master/session-one/app2.PNG "App Snap 2")



## Inline templates and css.

Lets mess with Texas.
Rather than use the stylesUrls, we can add a styles property to the @Component instead.  We can do this for the template as well.

edit the @Component in _texas.component.ts_ as follows:

```html
@Component({
  selector: 'app-texas',
  template: `
          <p>
             Dont mess with Texas!
            <app-dallas></app-dallas>
          </p>   `,
  styles: [`
   p {
    border-style: solid;
    border-color: red;
     }
  `]
})
```

Here is a good point to introduce the [Angular2 Style guide](https://angular.io/docs/ts/latest/guide/style-guide.html).

It has hints and and guidelines for all things angular2.  For example, [when do we use inline vs template urls?](https://angular.io/docs/ts/latest/guide/style-guide.html#!#05-04)

Many of the items are guides on how files should be named. Luckily, the angular-cli seems to take care of most of that.

A question we are at right now is how big does the template need to be before we break it out to its own file?
According to the style guide, they are saying 3 lines of code is a good gauge. I think we are ok here though.


[Next page](page4.md)














